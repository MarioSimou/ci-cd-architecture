name: Child Pipeline A

on:
  push:
    paths:
      - src/a/**
      - src/index.js
      - package.json
      - pnpm-lock.yaml
      - .github/workflows/*
      - '!.github/workflows/pipeline-b.yml'

jobs:
  prettier:
    uses: ./.github/workflows/prettier.yml
    with:
      node_version: lts/hydrogen
      pnpm_version: 7.x

  units:
    uses: ./.github/workflows/units.yml
    needs: [prettier]
    if: needs.prettier.result == 'success'
    with:
      module: a
      node_version: lts/hydrogen
      pnpm_version: 7.x

  release:
    uses: ./.github/workflows/release.yml
    needs: [units]
    if: needs.units.result == 'success'
    with:
      module: a
      node_version: lts/hydrogen
      pnpm_version: 7.x
